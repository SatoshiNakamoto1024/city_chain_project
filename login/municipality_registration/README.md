ä½ç½®æƒ…å ±ã‚’æ‰±ã†æ–¹æ³•ã¯å¤§ããåˆ†ã‘ã¦ï¼’é€šã‚Šã‚ã‚Šã¾ã™ã€‚ä»¥ä¸‹ã€ãã‚Œãã‚Œã®ãƒ¡ãƒªãƒƒãƒˆï¼ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã¨ã€ã©ã¡ã‚‰ãŒç¾å®Ÿçš„ã‹ã‚’ã¾ã¨ã‚ã¦ã¿ã¾ã—ãŸã€‚

1. ã‚³ãƒ¼ãƒ‰ï¼‹ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³æ–¹å¼ï¼ˆã„ã¾ã¾ã§ã® JIS ã‚³ãƒ¼ãƒ‰ï¼éšå±¤é¸æŠï¼‰
ãƒ¡ãƒªãƒƒãƒˆ
å®Ÿè£…ãŒã‚·ãƒ³ãƒ—ãƒ«
JSON ã‚„ DynamoDB ã«ã‚ã‚‰ã‹ã˜ã‚ãƒªã‚¹ãƒˆã‚’ç½®ã„ã¦ãŠã„ã¦ã€ãƒ•ãƒ­ãƒ³ãƒˆâ†’ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é–“ã§ã‚³ãƒ¼ãƒ‰ã‚’æ¸¡ã™ã ã‘ã€‚å¤–éƒ¨ API ã¯ä¸è¦ã§ã™ã€‚

å…¥åŠ›å“è³ªãŒé«˜ã„
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¥åŠ›ãƒŸã‚¹ã—ã«ããã€æ­£è¦åŒ–ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ï¼ˆJIS ã‚„ ISOï¼‰ãªã®ã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚‚æ¥½ã€‚

ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œã—ã‚„ã™ã„
åœ°å›³ã‚„ã‚¸ã‚ªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚µãƒ¼ãƒãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãªãã¦ã‚‚å‹•ãã¾ã™ã€‚

é‹ç”¨ã‚³ã‚¹ãƒˆãŒä½ã„
ã‚¸ã‚ªãƒãƒªã‚´ãƒ³ã‚„ã‚¿ã‚¤ãƒ«ã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¦ã‚‹å¿…è¦ãŒç„¡ãã€ãƒ‡ãƒ¼ã‚¿ã‚‚ JSON ãƒ•ã‚¡ã‚¤ãƒ«æ•° MB ç¨‹åº¦ã€‚

ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ
ä¸€è¦§ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãŒå¿…è¦
æ–°ã—ã„å¸‚ç”ºæ‘ã‚„å›½ãƒ»éƒ½é“åºœçœŒã‚³ãƒ¼ãƒ‰ã®æ›´æ–°ã‚’å®šæœŸçš„ã«å–ã‚Šè¾¼ã‚€å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

è‡ªç”±åº¦ãŒä½ã„
ç·¯åº¦çµŒåº¦ãªã©åº§æ¨™æƒ…å ±ã¯æŒãŸãªã„ã®ã§ã€åœ°å›³ä¸Šãƒ”ãƒ³ã‚’æ‰“ã¤ï¼è¿‘éš£æ¤œç´¢ã¨ã„ã£ãŸæ©Ÿèƒ½ã¯åˆ¥å®Ÿè£…ãŒå¿…è¦ã€‚

2. ãƒãƒªã‚´ãƒ³ï¼GPS é€†ã‚¸ã‚ªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ–¹å¼
ãƒ¡ãƒªãƒƒãƒˆ
åœ°ç†çš„ã«æŸ”è»Ÿ
GPS ã§æ‹¾ã£ãŸç·¯åº¦çµŒåº¦ã‚’ãƒ™ãƒ¼ã‚¹ã«ã€ãã®åº§æ¨™ãŒã©ã®ã€Œå¸‚ç”ºæ‘ãƒãƒªã‚´ãƒ³ã€ã«å…¥ã£ã¦ã„ã‚‹ã‹ã‚’åˆ¤å®šã§ãã‚‹ã€‚

åœ°å›³é€£æºãŒå®¹æ˜“
Leaflet ã‚„ Mapbox GL ãªã©ã§åœ°å›³ã‚’è¡¨ç¤ºã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç¾åœ¨åœ°ã‚’ãã®ã¾ã¾çµã‚Šè¾¼ã¿ã«ä½¿ãˆã‚‹ã€‚

ãƒ¡ãƒ³ãƒ†ä¸è¦
ä¸€åº¦ãƒãƒªã‚´ãƒ³ãƒ‡ãƒ¼ã‚¿ï¼ˆGeoJSONï¼‰ã‚’æƒãˆã‚Œã°ã€ã‚ã¨ã¯ã‚³ãƒ¼ãƒ‰ãƒ»åç§°ã®æ›´æ–°ã‚³ã‚¹ãƒˆã¯ã»ã¼ã‚¼ãƒ­ã€‚

ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ
åˆæœŸæ§‹ç¯‰ã‚³ã‚¹ãƒˆãŒé«˜ã„
ãƒ»å…¨ä¸–ç•Œï¼å›½å†…ã®è¡Œæ”¿åŒºåˆ†ãƒãƒªã‚´ãƒ³ãƒ‡ãƒ¼ã‚¿ï¼ˆGeoJSON/Shapefileï¼‰ã‚’é›†ã‚ã‚‹
ãƒ»ã‚¸ã‚ªã‚¹ãƒšãƒ¼ã‚·ãƒ£ãƒ« DBï¼ˆPostGIS, MongoDB ã® GeoJSONï¼‰ã‚„æ¼”ç®—ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå¿…è¦

é‹ç”¨è² è·ãŒå¢—å¤§
åº§æ¨™åˆ¤å®šã‚¯ã‚¨ãƒªï¼ˆãƒã‚¤ãƒ³ãƒˆã‚¤ãƒ³ãƒãƒªã‚´ãƒ³ï¼‰ã«ã¯ CPU è² è·ãŒã‹ã‹ã‚‹ã€‚
ã‚¿ã‚¤ãƒ«ã‚µãƒ¼ãƒãƒ¼ã‚’è‡ªå‰ã§é‹ç”¨ã™ã‚‹ãªã‚‰ã‚¤ãƒ³ãƒ•ãƒ©ã‚³ã‚¹ãƒˆã‚‚å¿…è¦ã€‚

å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ä¾å­˜
Google Maps ã‚„ AWS Location Service ç­‰ã®é€†ã‚¸ã‚ªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° API ã‚’ä½¿ã†å ´åˆã€å‘¼ã³å‡ºã—æ–™ãŒç™ºç”Ÿã€‚

ã©ã¡ã‚‰ãŒç¾å®Ÿçš„ã‹ï¼Ÿ
å¤§åŠã®æ¥­å‹™ç³»ã‚¢ãƒ—ãƒª ã§ã¯ã€ã‚³ãƒ¼ãƒ‰ï¼‹ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³æ–¹å¼ã§ååˆ†ã«è¦ä»¶ã‚’æº€ãŸã›ã¾ã™ã€‚
â””â†’ å…¥åŠ›å¼·åˆ¶ãƒ»ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®ã—ã‚„ã™ã•ã€ãƒ¡ãƒ³ãƒ†ã‚³ã‚¹ãƒˆã®ä½ã•ã‹ã‚‰ã€ç‰¹ã«è¡Œæ”¿åŒºåˆ†ãŒæ˜ç¢ºãªæ—¥æœ¬å›½å†…å‘ã‘ã‚µãƒ¼ãƒ“ã‚¹ã§ã¯ã“ã¡ã‚‰ãŒã‚ªã‚¹ã‚¹ãƒ¡ã€‚

ä½ç½®æƒ…å ±ã‚’ãƒ¡ã‚¤ãƒ³ã«æ‰±ã†ï¼ˆåœ°å›³è¡¨ç¤ºï¼è¿‘éš£æ¤œç´¢ï¼ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªï¼‰ å ´åˆã‚„ã€
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç¾åœ¨åœ°ã‹ã‚‰è‡ªå‹•åˆ¤å®š ã—ãŸã„ãªã‚‰ã€ãƒãƒªã‚´ãƒ³ï¼GPS æ–¹å¼ãŒå‘ãã¾ã™ã€‚
ãŸã ã—ãƒ™ãƒ¼ã‚¹æ§‹ç¯‰ã¨é‹ç”¨ãŒå¤§ããå¢—ãˆã‚‹ãŸã‚ã€ã¾ãšã¯ã‚³ãƒ¼ãƒ‰é¸æŠæ–¹å¼ã§ MVP ã‚’ä½œã‚Šã€å¾Œã‹ã‚‰å¿…è¦ã«å¿œã˜ã¦ GPS é€£æºã‚’æ¤œè¨ã™ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚

ç§ã®ãŠã™ã™ã‚
æœ€åˆã¯ã€ŒJIS ã‚³ãƒ¼ãƒ‰ï¼‹ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ã€ã§å®Ÿè£…ã—ã¦ã€å…¥åŠ›ãƒ•ãƒ­ãƒ¼ã‚’å›ºã‚ã‚‹ã€‚
ãã®ã†ãˆã§ã€Œåœ°å›³ï¼GPSã€ã‚’è¿½åŠ ã™ã‚‹æ®µéšã‚’åˆ¥ãƒ•ã‚§ãƒ¼ã‚ºã¨ã—ã¦åˆ‡ã‚Šåˆ†ã‘ã‚‹ã€‚

ã“ã®é †åºã§ã‚ã‚Œã°ã€ã„ããªã‚Šåœ°ç†ãƒãƒªã‚´ãƒ³ã®å±±ã‚’è¶Šãˆã‚‹å¿…è¦ãŒãªãã€ã‹ã¤å°†æ¥çš„ã« GPS ãƒ™ãƒ¼ã‚¹ã‚‚ã‚¹ãƒ ãƒ¼ã‚ºã«å°å…¥ã§ãã¾ã™ã€‚


#ã€€ã‚ãªãŸãŒæ§‹ç¯‰ã—ã¦ã„ã‚‹ã®ã¯ã€å¸‚ç”ºæ‘å˜ä½ã§åˆ†æ•£å‚åŠ å¯èƒ½ãªåœ°çƒè¦æ¨¡ã®åˆ†æ•£å‹è‡ªæ²»ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚
ãã®ãŸã‚ã«å¿…è¦ãªã®ã¯ï¼š

âœ… ç›®çš„ï¼ˆæ•´ç†ï¼‰
1. å¸‚ç”ºæ‘ã®ç™»éŒ²ï¼ˆmunicipality_registration/ï¼‰
â†’ ç™»éŒ²ã•ã‚Œã‚‹ã¨ã€å¤§é™¸/å›½/éƒ½é“åºœçœŒ/å¸‚ç”ºæ‘ã®æƒ…å ±ãŒ DynamoDB (Municipalities) ã«ä¿å­˜ã•ã‚Œã‚‹ã€‚

2. å¸‚ç”ºæ‘è·å“¡ã®ç™»éŒ²ï¼ˆmunicipality_verification/ï¼‰
â†’ å¯¾å¿œã™ã‚‹å¸‚ç”ºæ‘ã«ç´ã¥ãå½¢ã§è·å“¡ãŒç™»éŒ²ã•ã‚Œã‚‹ã€‚MunicipalStaffs ã«ä¿å­˜ã•ã‚Œã‚‹ã€‚

3. ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ï¼ˆregistration/ï¼‰
â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€ç™»éŒ²æ™‚ã«ã€Œå¤§é™¸ > å›½ > éƒ½é“åºœçœŒ > å¸‚ç”ºæ‘ã€ã‚’çµã‚Šè¾¼ã¿é¸æŠã™ã‚‹ UIï¼ˆã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ï¼‰ãŒå¿…è¦ã€‚

4. DAppsï¼ˆé€ä¿¡ãƒ•ã‚©ãƒ¼ãƒ ãªã©ï¼‰ã§ã‚‚åŒã˜æµã‚Œã§çµã‚Šè¾¼ã¿æ¤œç´¢
â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼é¸æŠç”»é¢ã§ã¯1å„„äººä¸­ã®1äººã‚’åŠ¹ç‡çš„ã«æ¢ã™ãŸã‚ã«ã“ã®å¤šæ®µéšçµã‚Šè¾¼ã¿ãŒå¿…é ˆã€‚

âœ… ç™»éŒ²ã®æµã‚Œï¼ˆæ•´ç†ï¼‰
1. /municipality_registration â†’ å¸‚ç”ºæ‘ãŒå‚åŠ ã‚’å®£è¨€ï¼ˆå¤§é™¸ã€å›½ã€éƒ½é“åºœçœŒã€å¸‚ç”ºæ‘ï¼‰
    â†’ DynamoDB(Municipalities) ã«ä¿å­˜
    â†’ region_tree.json ã®ã‚ˆã†ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•æ›´æ–°

2. /municipality_verification â†’ å¸‚ç”ºæ‘è·å“¡ãŒãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ‰¿èª

3. /registration â†’ å¸‚æ°‘ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œå¤§é™¸ > å›½ > éƒ½é“åºœçœŒ > å¸‚ç”ºæ‘ã€ã‚’ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ã§é¸ã³ã€ç™»éŒ²

4. /sending_dapps â†’ é€ä¿¡æ™‚ã«ã‚‚ã€Œå¤§é™¸ > å›½ > éƒ½é“åºœçœŒ > å¸‚ç”ºæ‘ > ãƒ¦ãƒ¼ã‚¶ãƒ¼åã€ã®é †ã«çµã£ã¦é¸æŠ

âœ… æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
ä»Šã‚ãªãŸãŒå¿…è¦ã¨ã—ã¦ã„ã‚‹ã®ã¯ã€ã‚¹ãƒ†ãƒƒãƒ—1ï¼šmunicipality_registration ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®æœ¬ç•ªå®Ÿè£…ã§ã™ã€‚
ğŸ“ municipality_registration/ ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆã¨ã‚³ãƒ¼ãƒ‰ä¸€å¼ï¼ˆä¿®æ­£æ¸ˆãƒ»æœ¬ç•ªå¯¾å¿œï¼‰
app_municipality_registration.py ï¼ˆFlaskã‚¢ãƒ—ãƒªï¼‰
routes.pyï¼ˆHTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé€£æºï¼‰
models.pyï¼ˆDynamoDBç™»éŒ²å‡¦ç†ï¼‰
config.py
templates/municipality_register.htmlï¼ˆæœ¬ç•ªUIã§ã®ç™»éŒ²ç”»é¢ï¼‰
region_tree_updater.pyï¼ˆç™»éŒ²ã•ã‚ŒãŸå¸‚ç”ºæ‘ã‚’ JSON ã«åæ˜ ï¼‰

ãã®å¾Œã€registration/ ã‚„ dapps/ ã§ã®çµã‚Šè¾¼ã¿ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ UIã¨ã®æ¥ç¶šã‚‚é€²ã‚ã¾ã™ã€‚
å¿…è¦ã§ã‚ã‚Œã°ã€S3ã‚„API Gatewayã‹ã‚‰ãƒ•ãƒ­ãƒ³ãƒˆã«region_tree.jsonã‚’æä¾›ã™ã‚‹æ§‹æˆã‚‚ææ¡ˆã§ãã¾ã™ã€‚


# ä¿®æ­£å¾Œã¯ã€
ãƒ•ãƒ­ãƒ³ãƒˆå´ã¯ JIS JSON (continents.json, countries.jsonâ€¦etc.) ã ã‘ã‚’å‚ç…§ã—ã€
ç™»éŒ²API ã¯å¿…é ˆé …ç›®ã‚’å—ã‘å–ã£ã¦ DynamoDB ã«æ›¸ãè¾¼ã¿ â†’ region_tree.json ã¯ ç™»éŒ²å¾Œ ã«ã®ã¿ update_region_tree ã§è¿½è¨˜
ã¨ã„ã†å‹•ãã«ãªã‚Šã¾ã™ã€‚


municipality_registration/service.py ã® register_municipality ã‚’å‘¼ã³å‡ºã—
ãƒ†ã‚¹ãƒˆã§ã¯ã“ã¡ã‚‰ã‚’å‘¼ã³ã€åŒæ™‚ã«
Municipalities ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¸‚ç”ºæ‘ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ 
MunicipalStaffs ãƒ†ãƒ¼ãƒ–ãƒ«ã«è·å“¡ãƒ¬ã‚³ãƒ¼ãƒ‰ï¼ˆstaff_id + staff_passwordï¼‰ã‚’è¿½åŠ 
ã—ã¦ãã‚Œã‚‹ãŸã‚ã€ç‹¬è‡ªã«è·å“¡ç™»éŒ²ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ›¸ãå¿…è¦ãŒãªããªã‚Šã¾ã—ãŸã€‚

# ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç† (municipality_login.py)
/staff/login ã® GET: staff_login.html ã‚’è¿”ã™
/staff/login ã® POST: JSON ã§ {staff_id, password, municipality} ã‚’å—ã‘å–ã‚Šã€
DynamoDB (MunicipalStaffs ãƒ†ãƒ¼ãƒ–ãƒ«) ã‹ã‚‰è©²å½“ã™ã‚‹è¡Œã‚’å–å¾—
ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒãƒƒã‚·ãƒ¥æ¯”è¼ƒã—ã€ä¸€è‡´ã™ã‚Œã° JWT (ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã« staff_id) ã‚’è¿”ã™

# æ‰¿èªå‡¦ç† (views.py + approval_api.py + verification.py + municipality_tools/municipality_approval_logger.py)
/staff/verify ã® GET: staff_verify.html ã‚’è¿”ã™
/staff/verify ã® POST: Authorization ãƒ˜ãƒƒãƒ€ãƒ¼ã‹ã‚‰ Bearer <JWT> ã‚’å–ã‚Šã€staff_id ã‚’å–å¾—
JSON ã§ {uuid, action} ã‚’å—ã‘å–ã‚Š (action ã¯ "approve" ã¾ãŸã¯ "reject")
DynamoDB (UsersTable) ã® approval_status ã‚’ "approved" / "rejected" ã«æ›´æ–°
æ‰¿èªãƒ­ã‚° (MunicipalApprovalLogTable) ã«è¨˜éŒ²

# ãƒ†ã‚¹ãƒˆ (test_municipality_verification.py)
äº‹å‰ã« register_municipality ã‚’å‘¼ã‚“ã§å¸‚ç”ºæ‘ã¨è·å“¡ã‚’ä¸€æ°—ã«ç™»éŒ²
/staff/login ã§ JWT ã‚’å–å¾—
UsersTable ã«ç›´æ¥ pending ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆ
/staff/verify ã§æ‰¿èªæ“ä½œ â†’ DynamoDB ã«åæ˜ ã•ã‚Œã¦ã„ã‚‹ã‹ãƒ»ãƒ­ã‚°ãŒæ®‹ã£ã¦ã„ã‚‹ã‹ã‚’ãƒã‚§ãƒƒã‚¯

# ç’°å¢ƒå¤‰æ•°ã®èª­ã¿è¾¼ã¿
config.py ã‚„ municipality_tools/* ã§ã¯ã™ã¹ã¦ os.getenv(...) ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§ã€
ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå‰ã«ç’°å¢ƒå¤‰æ•°ï¼ˆAWS_REGION, USERS_TABLE, STAFF_TABLE, APPROVAL_LOG_TABLE, JWT_SECRET, JWT_ALGORITHM ãªã©ï¼‰ã‚’ã‚»ãƒƒãƒˆã™ã‚Œã°å•é¡Œãªãå‹•ä½œã—ã¾ã™ã€‚

# ãƒ•ã‚¡ã‚¤ãƒ«é…ç½®
templates/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ staff_login.html ã¨ staff_verify.html ã‚’ç½®ãã€
Flask ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚ã«ã¯ template_folder="templates" ã‚’æ­£ã—ãæŒ‡å®šã—ã¦ãã ã•ã„ã€‚ãƒ†ã‚¹ãƒˆã§ã‚‚ template_folder ã‚’çµ¶å¯¾ãƒ‘ã‚¹ã§æ¸¡ã—ã¦ã„ã‚‹ã®ã§ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã™ã€‚

ä»¥ä¸Šã§ã€municipality_verification/ ä»¥ä¸‹ã®ä¿®æ­£å¾Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã™ã¹ã¦æ²è¼‰ã—ã¾ã—ãŸã€‚
ã“ã‚Œã‚’é…ç½®ã—ã¦ã€ã‚ã‚‰ãŸã‚ã¦ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚Œã°ãƒ†ã‚¹ãƒˆãŒãƒ‘ã‚¹ã™ã‚‹ã¯ãšã§ã™ã€‚

bash
Copy
Edit
(.venv312) $ cd municipality_verification
(.venv312) $ pytest -v test_municipality_verification.py
ã‚‚ã—è¿½åŠ ã®ç’°å¢ƒå¤‰æ•°è¨­å®šãŒå¿…è¦ãªå ´åˆã¯ã€ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå‰ã«ã‚·ã‚§ãƒ«ãªã©ã§ exportï¼ˆWindows ãªã‚‰ setï¼‰ã—ã¦ãã ã•ã„ã€‚

å‚è€ƒï¼šãƒ†ã‚¹ãƒˆå®Ÿè¡Œã«å¿…è¦ãª DynamoDB ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ 
UsersTable

PK: uuid (S)

RangeKey: session_id (S)

å±æ€§: approval_status (S), tenant_id (S), certificate (Map), ãªã©

MunicipalStaffs

PK: staff_id (S)

RangeKey: municipality (S)

å±æ€§: password_hash (S), salt (S), name (S), email (S), created_at (S)

MunicipalApprovalLogTable

PK: log_id (S)

ãã®ä»–: uuid, action, approver_id, reason, client_ip, timestamp

Municipalitiesï¼ˆregister_municipality ãŒæ›¸ãè¾¼ã‚€ï¼‰

PK: municipality_id (S)

RangeKey / ãã®ä»–: municipality_name (S), continent (S), country_code (S), â€¦, created_at (S)

ãƒ†ã‚¹ãƒˆç’°å¢ƒã§ä¸Šè¨˜ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å…ˆã«ä½œæˆã—ã€README ã‚„ãƒ†ã‚¹ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆãªã©ã§æº–å‚™ã—ã¦ãŠãã¨ã‚¹ãƒ ãƒ¼ã‚ºã§ã™ã€‚ã“ã‚Œã§å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿®æ­£ç‰ˆã‚’å…¥ã‚Œçµ‚ã‚ã‚Šã¾ã—ãŸã€‚