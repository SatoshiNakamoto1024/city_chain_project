#ã€€ä»£è¡¨çš„ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ã„ãã¤ã‹ã”ææ¡ˆã—ã¾ã™ã€‚ï¼ˆPoPã€PoHã€DpoSã€€ã¯æ—¢çŸ¥ã¨ã™ã‚‹ï¼‰
| #  | ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ åï¼ˆæ­£å¼ï¼‰                        | æ¨å¥¨ç•¥å·ã€€| ãƒ¡ãƒ¢ï¼ˆè¦šãˆã‚„ã™ã„èªå‘‚ï¼‰                                |
| -- | ------------------------------------------- | -------- | ------------------------------------------ |
| 1  | **Erasure Coding**                          | **EC**   | â€œEâ€rasure â€œCâ€oding                         |
| 2  | **HotStuff BFT**                            | **HS**   | â€œHâ€otâ€œSâ€tuff                               |
| 3  | **Verifiable Random Function**              | **VRF**  | ãã®ã¾ã¾å®šç•ª                                     |
| 4  | **HyParView ï¼‹ Plumtree**                   | **HVP**  | **H**yParView ï¼‹ **P**lumtree               |
| 5  | **Rendezvous (-HRW) Hashing**               | **RVH**  | **R**endez**v**ous **H**ashing             |
| 6  | **Asynchronous Binary Byzantine Agreement** | **ABBA** | æ—¢å®šç•¥å·                                       |
| 7  | **Threshold Encryption / Signature**        | **TES**  | **T**hreshold **E**ncryption/**S**ignature |
| 8  | **Cuckoo / Bloom Filter**                   | **CBF**  | **C**uckoo-**B**loom **F**ilter            |
| 9  | **PTP/NTP ï¼‹ Hybrid Logical Clock**         | **TNH**  | **T**ime (**N**TP/PTP) ï¼‹ **H**LC           |
| 10 | **Sharding Coordination**                   | **SC**   | **S**harding **C**oordination              |


1. Erasure Codingï¼ˆæ¶ˆå¤±è€æ€§å‘ä¸Šï¼‰
ä½•ã‚’ã™ã‚‹ï¼Ÿ
ãƒ‡ãƒ¼ã‚¿ã‚’ n åˆ†å‰²ã—ã€ä»»æ„ã® k<n ã‹ã‘åˆã‚ã›ã‚Œã°å…ƒã«æˆ»ã›ã‚‹ã‚ˆã†ã«ç¬¦å·åŒ–ã™ã‚‹ã€‚

åŠ¹æœ
ãƒ©ã‚¤ãƒˆãƒãƒ¼ãƒ‰ã®ä¸€éƒ¨ãŒå¤±ã‚ã‚Œã¦ã‚‚ã€æ®‹ã‚Š k ãƒ”ãƒ¼ã‚¹ã§é«˜é€Ÿå¾©å…ƒå¯èƒ½ã€‚

å®Ÿè£…ä¾‹
Reedâ€“Solomonã€LDPCã€Fountain Codesï¼ˆRaptorQï¼‰ãªã©ã€‚

2. HotStuffï¼ˆBFT ã‚³ãƒ³ã‚»ãƒ³ã‚µã‚¹ï¼‰
ä½•ã‚’ã™ã‚‹ï¼Ÿ
Bitcoin/PBFT ã‚’æ”¹è‰¯ã—ãŸã€å°‘æ•°ãƒ•ãƒ«ãƒãƒ¼ãƒ‰é–“ã®é«˜é€Ÿãƒ»å˜ç´”ãª3ãƒ•ã‚§ãƒ¼ã‚º BFT åˆæ„ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã€‚

åŠ¹æœ
ãƒ•ãƒ«ãƒãƒ¼ãƒ‰ãŒ 1ï¼…æœªæº€ã§ã‚‚ã€æ•°åms ã§å®‰å…¨ã«ãƒ–ãƒ­ãƒƒã‚¯ï¼ˆå®Œäº†ãƒãƒƒãƒï¼‰ã‚’ç¢ºå®šã§ãã‚‹ã€‚

3. VRFï¼ˆVerifiable Random Functionï¼‰
ä½•ã‚’ã™ã‚‹ï¼Ÿ
ä¹±æ•°ç”Ÿæˆã‚’ã€Œèª°ã§ã‚‚æ¤œè¨¼å¯èƒ½ã€ã«ã™ã‚‹é–¢æ•°ã€‚

åŠ¹æœ
æ¬¡æœŸãƒªãƒ¼ãƒ€ãƒ¼é¸å‡ºã‚„ã‚·ãƒ£ãƒ¼ãƒ‰åˆ†é…ã®å…¬å¹³ãªãƒ©ãƒ³ãƒ€ãƒ åŒ–ã«ã€‚

å®Ÿè£…ä¾‹
libSodium ã‚„ BLS-VRFã€‚

4. HyParView + Plumtree
ä½•ã‚’ã™ã‚‹ï¼Ÿ
ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒˆãƒãƒ­ã‚¸ã‚’å°è¦æ¨¡ãƒ“ãƒ¥ãƒ¼ã§ç®¡ç†ã—ã¤ã¤ã€ãƒ„ãƒªãƒ¼å‹ã§åŠ¹ç‡çš„ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ‹¡æ•£ã€‚

åŠ¹æœ
100ä¸‡ãƒãƒ¼ãƒ‰è¦æ¨¡ã§ã‚‚ã€Œãƒ­ã‚°ã‚¤ãƒ³ä¸­ãƒªã‚¹ãƒˆã€ã‚’ä½¿ã‚ãšã€100 ms å†…ã«å…¨å“¡ã¸æ–°ç€Txã‚’è¡Œãæ¸¡ã‚‰ã›ã‚‰ã‚Œã‚‹ã€‚

5. Rendezvous (HRW) Hashing
ä½•ã‚’ã™ã‚‹ï¼Ÿ
ãƒãƒ¼ãƒ‰å…¨ä½“ã‹ã‚‰ç‰¹å®šã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®è²¬ä»»ãƒãƒ¼ãƒ‰ã‚’ä¸€ç¾©çš„ã«ç®—å‡ºã€‚

åŠ¹æœ
Presence Service ãªã—ã§ã€Œã“ã® Tx ã¯ã“ã® 10 ãƒãƒ¼ãƒ‰ã«æŒ¯ã‚Šåˆ†ã‘ã€ã¨é«˜é€Ÿæ±ºå®šã§ãã‚‹ã€‚

6. Byzantine Broadcast (ABBA)
ä½•ã‚’ã™ã‚‹ï¼Ÿ
æ‚ªæ„ã‚ã‚‹ãƒãƒ¼ãƒ‰ãŒã„ã¦ã‚‚ã€Œå…¨æ­£ç›´ãƒãƒ¼ãƒ‰ãŒåŒã˜å€¤ã‚’å—ã‘å–ã‚‹ã€ä¿è¨¼ã‚’å‡ºã™ã€‚

åŠ¹æœ
ãƒ•ãƒ«ãƒãƒ¼ãƒ‰é–“ã®ãƒãƒƒãƒæŠ•ç¥¨ã‚„ checkpoint æ±ºå®šã«å®‰å…¨æ€§ã‚’ãƒ—ãƒ©ã‚¹ã€‚

7. Threshold Encryptionï¼Threshold Signature
ä½•ã‚’ã™ã‚‹ï¼Ÿ
å…¨ä½“ã®ã†ã¡ t-of-n ã®ãƒãƒ¼ãƒ‰ãŒå”åŠ›ã—ã¦å¾©å·ãƒ»ç½²åã‚’ç”Ÿæˆã€‚

åŠ¹æœ
ãƒ•ãƒ«ãƒãƒ¼ãƒ‰ 1 å°ã‚„éµã‚µãƒ¼ãƒãƒ¼éšœå®³ã«å¼·ã„ã€Œåˆ†æ•£éµç®¡ç†ã€ã€‚

8. Cuckoo Filterï¼Bloom Filterï¼ˆè»½é‡å‚ç…§ï¼‰
ä½•ã‚’ã™ã‚‹ï¼Ÿ
å¤§é‡ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å­˜åœ¨ãƒã‚§ãƒƒã‚¯ã‚’å®šæ•°ãƒ¡ãƒ¢ãƒªãƒ»å®šæ•°æ™‚é–“ã§å¯èƒ½ã«ã™ã‚‹ç¢ºç‡çš„ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã€‚

åŠ¹æœ
ã€Œã“ã® tx_id ã¯æ—¢ã«å‡¦ç†æ¸ˆï¼Ÿã€ã®é«˜é€Ÿåˆ¤å®šã‚„ã€PoH_ACK ã®äºŒé‡è¿”ç­”é˜²æ­¢ã«ã€‚

9. Time Synchronizationï¸“PTP/NTPï¼‹Hybrid Logical Clocks
ä½•ã‚’ã™ã‚‹ï¼Ÿ
ãƒãƒ¼ãƒ‰é–“ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’ãšã‚Œãªãç®¡ç†ã—ã€ä¸¦åˆ—ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã«æ•´åˆæ€§ã‚’ã‚‚ãŸã›ã‚‹ã€‚

åŠ¹æœ
ä¾å­˜è§£æ±ºã‚„ TTL åˆ¤å®šã‚’ç§’ä»¥ä¸‹ç²¾åº¦ã§ãƒ–ãƒ¬ãªãå®Ÿè¡Œã§ãã‚‹ã€‚

10. Sharding Coordinationï¼ˆåˆ†æ•£ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ¶å¾¡ï¼‰
ä½•ã‚’ã™ã‚‹ï¼Ÿ
ç•°ãªã‚‹ã‚·ãƒ£ãƒ¼ãƒ‰é–“ã®ã‚³ãƒ³ã‚·ã‚¹ãƒ†ãƒ³ã‚·ã‚„ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åŸå­æ€§ã‚’æ‹…ä¿ã™ã‚‹ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã€‚

åŠ¹æœ
10 ã‚·ãƒ£ãƒ¼ãƒ‰åŒ–ã—ãŸå¾Œã§ã‚‚ã€è·¨ã‚‹ Tx ã‚’å®‰å…¨ã«ã‚³ãƒŸãƒƒãƒˆå¯èƒ½ã€‚

ğŸ¯ã¾ã¨ã‚
å¯ç”¨æ€§å‘ä¸Šï¼šErasure Coding, Bloom/Cuckoo Filter
åˆæ„å½¢æˆï¼šHotStuff, ABBA, VRF, Threshold Sig
è² è·åˆ†æ•£ï¼šRendezvous Hashing, HyParViewï¼‹Plumtree
ã‚¯ãƒ­ãƒƒã‚¯ & ä¾å­˜åˆ¶å¾¡ï¼šHybrid Logical Clock, Sharding Tx Control

ã“ã‚Œã‚‰ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€ãƒ•ã‚§ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¢ãƒ‡ãƒ«ã®ã€Œè¶…é«˜é€ŸéåŒæœŸã€ã€Œç¢ºå®Ÿå¾©å…ƒã€ã€Œé«˜ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€ã€Œã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã€ã‚’ã•ã‚‰ã«å¼·åŒ–ã§ãã¾ã™ã€‚èˆˆå‘³ã‚ã‚‹ã‚‚ã®ãŒã‚ã‚Œã°è©³ç´°ã‚’ã”èª¬æ˜ã—ã¾ã™ï¼


#ã€€å®Ÿè£…ã¾ã§ã®æ‰‹é †
å®Ÿè£…ã¯ç¢ºã‹ã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°ã§ã™ãŒã€10ç¨®ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ã†ã¾ããƒ¬ã‚¤ãƒ¤åˆ†ã‘ã™ã‚Œã°ç¾å®Ÿçš„ã«é–‹ç™ºã§ãã¾ã™ã€‚ä»¥ä¸‹ã«ã€ãƒ•ã‚§ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¢ãƒ‡ãƒ«å…¨ä½“ã‚’ 5 ã¤ã®ãƒ¬ã‚¤ãƒ¤ã«åˆ†å‰²ã—ã¦ã€ãã‚Œãã‚Œã«æœ€é©ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’å‰²ã‚Šå½“ã¦ã‚‹è¨­è¨ˆæ¡ˆã‚’ç¤ºã—ã¾ã™ã€‚

ãƒ¬ã‚¤ãƒ¤ 1ï¼šãƒãƒ¼ãƒ‰ç™ºè¦‹ãƒ»ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
Rendezvous Hashing
TxID ã‚„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆID ã‚’ãƒãƒƒã‚·ãƒ¥ã—ã€å›ºå®šã® k ãƒãƒ¼ãƒ‰ ã‚’ä¸€ç¾©çš„ã«é¸å‡ºã€‚
node_list = all_nodes(); targets = HRW(nodes, tx_id, k)
VRFï¼ˆVerifiable Random Functionï¼‰
ãƒªãƒ¼ãƒ€ãƒ¼é¸å‡ºã‚„ã€PoH_REQUEST ã®é€ä¿¡å…ˆãƒãƒ¼ãƒ‰ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«æ±ºã‚ã‚‹éš›ã«ã€‚
ãƒ•ã‚§ã‚¢ã‹ã¤æ”¹ã–ã‚“ä¸èƒ½ãªãƒ©ãƒ³ãƒ€ãƒ æ€§ã‚’æ‹…ä¿ã€‚

ãƒ¬ã‚¤ãƒ¤ 2ï¼šè€éšœå®³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
Erasure Coding
å…ƒ Tx ã‚’ n åˆ†å‰²ã—ã€ä»»æ„ã® k ã§å¾©å…ƒå¯èƒ½ã«ã€‚
å„ãƒ©ã‚¤ãƒˆãƒãƒ¼ãƒ‰ã¯ã€Œè‡ªåˆ†ã®ã‚·ãƒ£ãƒ¼ãƒ‰ç‰‡ã€ã‚’ä¿å­˜ã—ã€PoH ã§å­˜åœ¨è¨¼æ˜ã‚’è¿”ã™ã€‚
Cuckoo/Bloom Filter
ãƒ•ãƒ«ãƒãƒ¼ãƒ‰ã‚„ãƒ«ãƒ¼ã‚¿ãƒ¼ãŒã€Œã©ã®ã‚·ãƒ£ãƒ¼ãƒ‰ã‚’ä¿æŒã—ã¦ã„ã‚‹ã‹ã€ã‚’é«˜é€Ÿæ¤œç´¢ã™ã‚‹ãŸã‚ã®è»½é‡ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã€‚

ãƒ¬ã‚¤ãƒ¤ 3ï¼šè¨¼æ˜ãƒ»å†æ§‹ç¯‰
PoH (Proof of Hold)
PoH_ACK Tx ã‚’è¿”ã™ã“ã¨ã§ã€Œã“ã®ãƒãƒ¼ãƒ‰ãŒã‚·ãƒ£ãƒ¼ãƒ‰ã‚’ä¿æŒã—ã¦ã„ã‚‹ã€è¨¼æ˜ã‚’DAGã«è¿½åŠ ã€‚
Threshold Encryption / Signature
ãƒ•ãƒ«ãƒãƒ¼ãƒ‰é–“ã§éµã‚’åˆ†æ•£ç®¡ç†ã—ã€t-of-n ã§æš—å·éµã‚’å±•é–‹ã€‚
Mongo/Router çµŒç”±ã®å†æ§‹ç¯‰æ™‚ã«ä¿¡é ¼ã§ãã‚‹ã‚­ãƒ¼ç®¡ç†ã‚’å®Ÿç¾ã€‚

ãƒ¬ã‚¤ãƒ¤ 4ï¼šBFT ã‚³ãƒ³ã‚»ãƒ³ã‚µã‚¹ & å®Œäº†åˆ¤å®š
DPoS (Delegated Proof of Stake)
å°‘æ•°ã®ä»£è¡¨ãƒ•ãƒ«ãƒãƒ¼ãƒ‰ãŒã€k/n å†æ§‹ç¯‰å¾Œã®å®Œäº†ãƒãƒƒãƒã‚’é«˜é€Ÿæ‰¿èªã€‚
HotStuffï¼ˆã¾ãŸã¯ ABBAï¼‰
DPoS ã ã‘ã§ãªãã€ã‚ˆã‚Šå¼·åŠ›ã«ã€Œãƒãƒªãƒ‡ãƒ¼ã‚¿ã®åˆæ„ã€ã‚’å¾—ãŸã„å ´åˆã«ä½¿ãˆã‚‹ 3ãƒ•ã‚§ãƒ¼ã‚º BFTã€‚

ãƒ¬ã‚¤ãƒ¤ 5ï¼šæ™‚é–“ç®¡ç†ãƒ»ã‚¹ã‚±ãƒ¼ãƒ«åˆ¶å¾¡
Time Synchronization
å„ãƒãƒ¼ãƒ‰ã‚’ PTP/NTPï¼‹Hybrid Logical Clock ã§åŒæœŸã—ã€PoHï¼TTLåˆ¤å®šã‚’ãƒŸãƒªç§’å˜ä½ã§æ•´åˆã€‚
Sharding Coordination
Erasure Coding (ãƒ¬ã‚¤ãƒ¤2) ã§åˆ†å‰²ã•ã‚ŒãŸãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’ã€è¤‡æ•°ã‚·ãƒ£ãƒ¼ãƒ‰ã«è·¨ãŒã‚‹ Tx ã¨ã—ã¦å®‰å…¨ã«ã‚³ãƒŸãƒƒãƒˆã€‚


#ã€€ä»¥ä¸‹ã®ã‚ˆã†ã«ã€é€ä¿¡DAGï¼å—ä¿¡DAG å„ 5 å±¤ã«åˆ†ã‘ã€ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã”ã¨ã« Python ã¨ Rust ã®å®Ÿè£…é ˜åŸŸã‚’æ•´ç†ã—ã¾ã™ã€‚

ğŸ“¨ é€ä¿¡DAG ãƒ¬ã‚¤ãƒ¤ â†” Python / Rust å®Ÿè£…ãƒãƒˆãƒªã‚¯ã‚¹
| å±¤                 | è²¬å‹™                            | ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ                                                            | Python ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«                                                                                                          | Rust ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«                                                                                              |
| ----------------- | ----------------------------- | ---------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- |
| **S1**<br>ãƒãƒ¼ãƒ‰é¸å®š   | â€œã©ã®ãƒãƒ¼ãƒ‰ã«æŠ•ã’ã‚‹ã‹â€ ã®é¸å®š              | â€¢ **PoP**<br>â€¢ **Rendezvous Hashing**<br>â€¢ **VRF**               | `node_selection.py`:<br>- REST å‘¼ã³å‡ºã—ã§ Presence å–å¾—<br>- pop.get\_place\_info\_and\_bonus()<br>- rendezvous\_hash() ãƒ•ã‚£ãƒ«ã‚¿ | `node_selection.rs`:<br>- STR-tree ãƒãƒªã‚´ãƒ³åˆ¤å®š<br>- **VRF** å®Ÿè£… (libSodium é€£æº)                                |
| **S2**<br>ã‚·ãƒ£ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° | Tx â†’ n åˆ†å‰²ãƒ»k å†æ§‹ç¯‰å¯              | â€¢ **Erasure Coding**<br>â€¢ **Bloom/Cuckoo Filter**                | `sharding.py`:<br>- é«˜ãƒ¬ãƒ™ãƒ«å‘¼ã³å‡ºã— encode\_rs()/make\_filter()                                                              | `sharding.rs`:<br>- SIMD Reedâ€“Solomon<br>- Bloom/Cuckoo Filter ã‚³ã‚¢                                       |
| **S3**<br>PoH ç™ºè¡Œ  | PoH\_REQUEST â†’ PoH\_ACK ã§ä¿å­˜è¨¼æ˜ | â€¢ **PoH**<br>â€¢ **Threshold Encryption (KEM)**<br>â€¢ **Time Sync** | `poh.py`:<br>- PoHManager.request\_poh()<br>- sign via pyo3 å‘¼ã³å‡ºã—                                                      | `crypto.rs`:<br>- **Dilithium** ç½²å<br>- **NTRU-KEM** ã‚«ãƒ—ã‚»ãƒ«åŒ–<br>`time_sync.rs`:<br>- Hybrid Logical Clock |
| **S4**<br>é…ä¿¡      | Presence Service çµŒç”±ã§ç›´æ¥ãƒãƒ¼ãƒ‰ã¸é€ä¿¡  | *(Presence Service)*                                             | `broadcast.py`:<br>- HTTP/gRPC ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè£…                                                                               | *(ä¸è¦)*                                                                                                  |
| **S5**<br>ã‚³ãƒŸãƒƒãƒˆ    | PoH\_ACK é›†ç´„ â†’ ãƒãƒƒãƒæ‰¿èª           | â€¢ **DPoS**<br>â€¢ **ABBA (BFT)**<br>â€¢ **Sharding Coordination**    | `commit.py`:<br>- commit\_batch() ç™ºè¡Œ                                                                                  | `consensus.rs`:<br>- DPoS æŠ•ç¥¨é›†ç´„<br>- HotStuff/ABBA ã‚³ã‚¢                                                    |


ğŸ“¥ å—ä¿¡DAG ãƒ¬ã‚¤ãƒ¤ â†” Python / Rust å®Ÿè£…ãƒãƒˆãƒªã‚¯ã‚¹
| å±¤                | è²¬å‹™                               | ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ                                                                       | Python ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«                                                                   | Rust ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«                                                                |
| ---------------- | -------------------------------- | --------------------------------------------------------------------------- | ------------------------------------------------------------------------------ | ------------------------------------------------------------------------- |
| **R1**<br>å—ä¿¡     | FRESH\_TXï¼ã‚·ãƒ£ãƒ¼ãƒ‰å—ä¿¡ â†’ ã‚­ãƒ¥ãƒ¼æŠ•å…¥         | *(Ingress I/O)*                                                             | `ingress.py`:<br>- gRPCï¼HTTP å—ä¿¡â†’enqueue()                                      | *(ä¸è¦)*                                                                    |
| **R2**<br>ä¿®å¾©å…ˆé¸å®š  | ã©ã®ãƒãƒ¼ãƒ‰ã« REPAIR\_REQ ã‚’é€ã‚‹ã‹          | â€¢ **PoP**<br>â€¢ **Rendezvous Hashing**<br>â€¢ **VRF**                          | `repair_selection.py`:<br>- Presence ã‹ã‚‰ node\_list<br>- pop + rendezvous + VRF | *(VRF ã¯ node\_selection.rs ã‚’æµç”¨)*                                          |
| **R3**<br>ä¿®å¾©è¦æ±‚ç™ºè¡Œ | REPAIR\_REQ ã‚’è¤‡æ•°ãƒãƒ¼ãƒ‰ã«ä¸¦åˆ—é€ä¿¡          | â€¢ **PoH** (RepairReq)                                                       | `repair_req.py`:<br>- RepairManager.send\_repair\_req()                        | `crypto.rs`:<br>- RepairReq ç½²åæ¤œè¨¼                                          |
| **R4**<br>å¾©å…ƒå‡¦ç†   | kãƒ”ãƒ¼ã‚¹é›†ã‚ â†’ Erasure Decode ï¼† PoH æ¤œè¨¼ | â€¢ **Erasure Coding Decode**<br>â€¢ **Bloom/Cuckoo Filter**<br>â€¢ **Time Sync** | `reconstruction.py`:<br>- decode\_rs()<br>- validate\_poh\_ack()               | `sharding.rs`:<br>- decode\_rs()<br>`crypto.rs`:<br>- verify\_signature() |
| **R5**<br>ã‚³ãƒŸãƒƒãƒˆ   | å¾©å…ƒæ¸ˆTx â†’ ä»£è¡¨ãƒ•ãƒ«ãƒãƒ¼ãƒ‰ç¾¤ã§æ‰¿èª              | â€¢ **DPoS**<br>â€¢ **ABBA**<br>â€¢ **Sharding Coordination**                     | `commit.py`:<br>- commit\_recovered\_tx()                                      | `consensus.rs`:<br>- DPoS/HotStuff ã‚³ã‚¢                                     |


# ã¾ã¨ã‚
Python ã¯ä¸»ã«
Presence Service / I/O / é«˜ãƒ¬ãƒ™ãƒ«åˆ¶å¾¡
å„ç¨®ãƒãƒãƒ¼ã‚¸ãƒ£ï¼ˆPoHManager, RepairManagerï¼‰
éåŒæœŸãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼ˆasyncioï¼‰

Rust ã¯ä¸»ã«
æš—å·ï¼ˆDilithium/NTRU-KEMï¼‰
ç¬¦å·åŒ–ï¼ˆReedâ€“Solomon, Bloom Filterï¼‰
BFT ã‚³ã‚¢ï¼ˆDPoS, HotStuff/ABBAï¼‰
VRF / æ™‚åˆ»åŒæœŸ

ã“ã®åˆ†å‰²ã«ã‚ˆã‚Šã€é«˜é€ŸéåŒæœŸ ã¨ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ï¼è€éšœå®³æ€§ ã®ä¸¡ç«‹ã‚’å®Ÿç¾ã—ã¾ã™ã€‚


# é–‹ç™ºã‚’ã€Œå¤±æ•—ã—ãªã„é †ç•ªã€ã§é€²ã‚ã‚‹ãŸã‚ã®å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—
ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼š â€œ1 ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãšã¤ãƒ»Pythonâ‡†Rustã‚’è–„ã„å¢ƒç•Œã§çµåˆãƒ»æ®µéšãƒ†ã‚¹ãƒˆâ€

ğŸ—‚ 0. Git ãƒªãƒã‚¸ãƒˆãƒªæ§‹é€ ã‚’å…ˆã«å›ºã‚ã‚‹
city_chain_project/
â”œâ”€ Algorithm/
â”‚   â”œâ”€ pop/          â† PoP (python + rust)
â”‚   â”œâ”€ poh/          â† PoH
â”‚   â”œâ”€ dpos/         â† DPoS
â”‚   â”œâ”€ vrf/          â† VRF
â”‚   â””â”€ common/       â† å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ (crypto, ffi, time, etc.)
â”œâ”€ network/DAGs/sending_DAG/
â”‚   â”œâ”€ python/
â”‚   â””â”€ rust/
â””â”€ network/DAGs/receiving_DAG/
    â”œâ”€ python/
    â””â”€ rust/
ã©ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚‚ã€ŒAlgorithm/ã€é…ä¸‹ã«â€œå˜æ©Ÿèƒ½ãƒ©ã‚¤ãƒ–ãƒ©ãƒªâ€ã¨ã—ã¦ç‹¬ç«‹ã€‚
DAG å´ã¯ãã‚Œã‚‰ã‚’ import / pyo3 çµŒç”±ã§å‘¼ã³å‡ºã™ã ã‘ã€‚*

ğŸ¥‡ 1. PoP ã‹ã‚‰ç€æ‰‹ï¼ˆå¤–éƒ¨ä¾å­˜ãŒå°‘ãªã„ï¼‰
1-A. Python éƒ¨åˆ†
# algorithm/pop/python/polygon.py
from shapely.geometry import Point, Polygon, STRtree
# â†’ STRtree ç”Ÿæˆ & city åˆ¤å®š

# algorithm/pop/python/event.py
def get_place_info(user_id, lat, lon): ...

1-B. Rust éƒ¨åˆ†
// algorithm/pop/rust/src/lib.rs
#[pyfunction]
fn query_city(poly_json: String, lat: f64, lon: f64) -> Option<String> { ... }

1-C. çµåˆ (pyo3)
import pop_rust
cid = pop_rust.query_city(json_blob, lat, lon)

ãƒ†ã‚¹ãƒˆï¼š
pytest + sample ãƒãƒªã‚´ãƒ³ â†’ äºˆæƒ³ city_id ãŒè¿”ã‚‹ã‹ã‚’ç¢ºèª
Rust ã¯ cargo test
å®ŒæˆåŸºæº–ï¼šé€ä¿¡DAG S1 / å—ä¿¡DAG R2 ã‹ã‚‰ pop.get_place_info() ãŒä½¿ãˆã‚‹ã€‚

ğŸ¥ˆ 2. PoHï¼ˆä¿å­˜è¨¼æ˜ï¼‰ã‚’å®Ÿè£…
Rustï¼šDilithium/NTRU ç½²åãƒ»æ¤œè¨¼ â†’ crypto.rs

Rustï¼špoh.rs
#[pyfunction] fn create_poh_ack(req_json: String, priv_pem: String) -> String
#[pyfunction] fn verify_poh_ack(ack_json: String, pub_pem: String) -> bool
Pythonï¼špoh_manager.py

asyncio ã§ PoH_REQUEST â†’ PoH_ACK åé›†
await rust.create_poh_ack(...)

ãƒ†ã‚¹ãƒˆï¼š
unitï¼šç½²åâ†’æ¤œè¨¼ round-trip
integrationï¼šPoH_REQUESTâ†’ACKâ†’é–¾å€¤ã‚«ã‚¦ãƒ³ãƒˆ

ğŸ¥‰ 3. DPoSï¼ˆä»£è¡¨è€…æŠ•ç¥¨ï¼‰ã‚’å®Ÿè£…
ã“ã“ã‹ã‚‰ã€Œã‚³ãƒ³ã‚»ãƒ³ã‚µã‚¹+BFTã€ãªã®ã§ Rust ãŒé‡å½¹ã€‚

3-A. Rustï¼šdpos.rs
æŠ•ç¥¨ãƒ‡ãƒ¼ã‚¿æ§‹é€  (stake, vote, online)
collect()ï¼šRayon ã§ä¸¦åˆ—é›†è¨ˆ â†’ approve / reject

3-B. Pythonï¼šdpos_manager.py
ä»£è¡¨è€…ãƒªã‚¹ãƒˆç®¡ç†ï¼ˆstake è¿½åŠ ãƒ»å‰Šé™¤ï¼‰
result = rust.dpos_collect(json_votes, threshold)

ãƒ†ã‚¹ãƒˆï¼š
å˜ä½“ï¼šæŠ•ç¥¨åˆè¨ˆè¨ˆç®—
ã‚·ãƒŠãƒªã‚ªï¼šPoH_CNTâ‰¥5 â†’ DPoS æ‰¿èª

ğŸ… 4. VRFï¼ˆä¹±æ•°ï¼ãƒªãƒ¼ãƒ€ãƒ¼é¸å‡ºï¼‰
Rust (vrf.rs)ï¼šBLS-VRF å®Ÿè£… or libsodium ãƒ©ãƒƒãƒ‘ãƒ¼
Python (vrf_wrapper.py)ï¼š generate(seed) â†’ proof / value

é€ä¿¡DAG S1 / å—ä¿¡DAG R2 ã®ãƒãƒ¼ãƒ‰é¸å®šã§
score = vrf.get_score(tx_id, node_pubkey)

ğŸ§© 5. æ®‹ã‚Š 6 ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®ä½ç½®ã¥ã‘
ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 	ä¸»æ‹…å½“ãƒ¬ã‚¤ãƒ¤	Rust / Python å½¹å‰²
Erasure Codingã€	S2ãƒ»R4ã€	Rustï¼šencode/decode SIMD
Bloom/Cuckoo Filterã€	S2ãƒ»R4ã€	Rustï¼šãƒ‡ãƒ¼ã‚¿æ§‹é€ ï¼Pythonï¼šAPI
Time Synchronizationã€	å…±é€šã€	Rustï¼šHLC æ¼”ç®—ï¼Pythonï¼šNTP/PTP å‘¼ã³å‡ºã—
Threshold Encryptionã€	S3ãƒ»R3ã€	Rustï¼šNTRU-KEM wrap/unwrap
ABBA (HotStuff-lite)ã€	S5ãƒ»R5ã€	Rustï¼š3-phase BFTï¼Pythonï¼šå‘¼ã³å‡ºã—
Sharding Coordinationã€	S5ãƒ»R5ã€	Pythonï¼šã‚­ãƒ¥ãƒ¼ç®¡ç†ï¼Rustï¼šåŸå­ã‚³ãƒŸãƒƒãƒˆ

ğŸ¤– å®Ÿè£…ã‚µã‚¤ã‚¯ãƒ«ï¼ˆCI/CDï¼‰
ãƒ•ã‚§ãƒ¼ã‚ºæ¯ã« feature ãƒ–ãƒ©ãƒ³ãƒï¼ˆpop/ã€poh/ã€dpos/â€¦ï¼‰
GitHub Actions / Azure Pipelines
step1: cargo test --all
step2: pytest tests/
step3: maturin build â†’ wheel â†’ pytest -m integration
merge â†’ main ã§ Docker build & push

ğŸš€ é‹ç”¨é–‹å§‹ã¾ã§ã®ã‚¹ãƒ†ãƒƒãƒ—
PoP ãŒå‹•ã„ãŸã‚‰ â†’ é€ä¿¡DAG S1 ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ©Ÿèƒ½ãŒå®Œæˆ
PoH ãŒå‹•ã„ãŸã‚‰ â†’ ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ä¿å­˜è¨¼æ˜ãŒå›ã‚‹
DPoS ãŒä¹—ã£ãŸã‚‰ â†’ å®Œäº†ãƒãƒƒãƒãŒç¢ºå®š
VRF å°å…¥ã§ ãƒªãƒ¼ãƒ€ãƒ¼ï¼ãƒãƒ¼ãƒ‰é¸å‡ºãŒå…¬å¹³åŒ–
æ®µéšçš„ã« BloomFilter â†’ ErasureCoding â†’ BFT ã‚’ã‚ªãƒ³

ã™ã¹ã¦ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯ â€œpythonâ†’rust å‘¼ã³å‡ºã—â€ ã®è–„ã„å¢ƒç•Œã§ç–çµåˆã€‚
ã“ã†ã™ã‚Œã° 1ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãšã¤å®Ÿè£… â†’ ãƒ†ã‚¹ãƒˆ â†’ çµåˆ ã‚’ç¹°ã‚Šè¿”ã™ã ã‘ã§ã€
æœ€çµ‚çš„ã« 10+PoP/PoH/DPoS ã‚’ãƒ•ãƒ«æ­è¼‰ã—ãŸãƒ•ã‚§ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ãŒå®Œæˆã—ã¾ã™ã€‚

# ã¾ã¨ã‚
é–‹ç™ºãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ï¼ˆä¾‹ï¼‰
ãƒ•ã‚§ãƒ¼ã‚º	è¿½åŠ ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 	å®Œäº†ç›®æ¨™
1	PoP (polygon+GPS)ã€Rendezvous	é€ä¿¡ï¼ä¿®å¾©å…ˆé¸å®šã®PoPçµ„ã¿è¾¼ã¿
2	Erasure Coding + Bloom Filter	10-way ã‚·ãƒ£ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°å¯¾å¿œ
3	PoH + Presence Service/DHT	PoH_REQUEST/ACK å®Œå…¨éåŒæœŸåŒ–
4	DPoS + HotStuff	ãƒãƒƒãƒæ‰¿èªãƒ•ãƒ­ãƒ¼å®Ÿè£…
5	VRF + Threshold Sig	ãƒªãƒ¼ãƒ€ãƒ¼é¸å‡ºãƒ»éµåˆ†æ•£ç®¡ç†
6	Time Sync + Shard Coordination	TTLï¼ä¾å­˜åˆ¶å¾¡ã‚’ãƒŸãƒªç§’ç²¾åº¦ã§ä¿è¨¼

ğŸƒâ€â™‚ï¸ é–‹ç™ºã®æµã‚Œ
å„å±¤ã® Python ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ I/F ã‚’å®šç¾©
Rust ã§é‡ã„æš—å·ãƒ»ç¬¦å·åŒ–ãƒ»BFT ã‚³ã‚¢å®Ÿè£…
Python â‡„ Rust ã¯ pyo3ï¼‹ffi ãƒ©ãƒƒãƒ‘ãƒ¼ã§ã¤ãªã
Docker Compose / k8s ã§ ã‚µãƒ¼ãƒ“ã‚¹åŒ–
ãƒ†ã‚¹ãƒˆ â†’ æ€§èƒ½è¨ˆæ¸¬ â†’ å„å±¤ã‚’ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ã‚¦ãƒˆ

ã“ã‚Œã§ é€ä¿¡DAGï¼å—ä¿¡DAG ä¸¡æ–¹ã®å…¨ 10 å±¤ã‚’ã€
Pythonï¼ˆåˆ¶å¾¡ï¼†é«˜ãƒ¬ãƒ™ãƒ« I/Oï¼‰ï¼‹Rustï¼ˆæš—å· ï¼‹ ä¸¦åˆ—å‡¦ç†ï¼‰ã«åˆ†å‰²ã—ã€
ãƒ•ã‚§ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¢ãƒ‡ãƒ«ã‚’ç¾å®Ÿçš„ã«é–‹ç™ºã§ãã¾ã™ã€‚